# ============================================================
#  Qwen3-ASR Fine-tuning Configuration
#  All values here are defaults. CLI args override YAML values.
#  Usage: python qwen3_asr_sft.py --config config.yaml
# ============================================================

# --------------- Model ---------------
model_path: Qwen/Qwen3-ASR-1.7B
output_dir: ./qwen3-asr-finetuning-Hindi

# --------------- Data source (choose one) ---------------

# Option A: local JSONL files
# train_file: ""
# eval_file: ""

# Option B: HF Hub dataset
dataset_name: Kapture/Hindi-Transcription-DS
dataset_config: null          # subset/config name, if any
# dataset_train_split: train
# dataset_eval_split: test
streaming: false              # set to true for large datasets (requires max_steps)
language: Hindi             # prepend "language LANG<asr_text>" to plain transcripts
#                                # omit if your text already has the prefix

# --------------- Audio ---------------
sr: 16000

# --------------- Training ---------------
batch_size: 8
grad_acc: 4
lr: 2.0e-5
epochs: 2
max_steps: -1                   # required when streaming: true
log_steps: 10
lr_scheduler_type: cosine
warmup_ratio: 0.02

# --------------- DataLoader ---------------
num_workers: 8
pin_memory: 1
persistent_workers: 1
prefetch_factor: 2

# --------------- Checkpointing ---------------
save_strategy: steps
save_steps: 1000
save_total_limit: 5

# --------------- Eval split from training data ---------------
eval_split_ratio: 0.01           # e.g. 0.05 to hold out 5% of train as eval
#                                # ignored if an eval source is already provided
#                                # not compatible with streaming
eval_split_seed: 42

# --------------- Resume ---------------
resume: 0                       # set to 1 to auto-resume from latest checkpoint
resume_from: ""                 # explicit checkpoint path

# --------------- Logging ---------------
wandb_project: "Qwen3-ASR-Finetune"               # set to enable W&B logging, e.g. "my-asr-project"
wandb_run_name: "FullRun-1"              # optional run name in W&B
